{"mappings":"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","sources":["src/index.ts","src/primevue_adapter.ts"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { primevueAdapter } from './primevue_adapter'\n\nexport const DEFAULT_MESSAGE: FlashMessage = {\n  type: 'success',\n  message: '',\n  position: 'top'\n}\n\nconst mergeWithDefaultMessage = (\n  flashMessage: FlashMessageArgument\n): FlashMessage => {\n  return { ...DEFAULT_MESSAGE, ...flashMessage }\n}\n\n/**\n * set callback function\n */\nconst showFlashMessageWith = (\n  callback: (flashMessage: FlashMessage) => any,\n  patcher: Function\n): void => {\n  patcher((state: RootState) => {\n    state.showFlashMessageFunction = callback\n  })\n}\n\nconst convertFlashMessageArguments = (\n  store: IFlashMessageStore,\n  flashMessage: FlashMessage\n) => {\n  switch (store.uiFramework) {\n    case 'buefy':\n      return flashMessage\n    case 'primevue':\n      return primevueAdapter(flashMessage)\n    default:\n      console.info(\n        `[odd][useFlashMessage] There is no adapter for UI Framework '${store.uiFramework}'. We'll use original argument format,`\n      )\n      return flashMessage\n  }\n}\n\n/**\n * display messages in View, with function that provided from vue component.\n */\nconst showAllMessages = (store: IFlashMessageStore) => {\n  store.all.forEach((flashMessage: FlashMessage) => {\n    if (!!store.showFlashMessageFunction) {\n      store.showFlashMessageFunction(\n        convertFlashMessageArguments(store, flashMessage)\n      )\n      store.clear()\n    } else {\n      console.error(\n        '[FlashMessageStore] please define `showFlashMessageFunction` use `init` action first.'\n      )\n    }\n  })\n}\n\n// store definition\nexport const useFlashMessageStore = defineStore('[odd] flash-message-store', {\n  state: (): RootState => {\n    return {\n      queue: [],\n      showFlashMessageFunction: undefined,\n      uiFramework: 'buefy'\n    }\n  },\n\n  getters: {\n    /**\n     * list all flash messages in an array\n     */\n    all(state): FlashMessage[] {\n      return state.queue\n    }\n  },\n\n  actions: {\n    /**\n     * initializing flash message store. if any change happen to `queue` and include new messages, `showAllMessages`\n     * will been called for display messages in View.\n     */\n    init(\n      uiFrameworkName: 'buefy' | 'primevue' | undefined,\n      callback: (flashMessage: FlashMessage) => any\n    ) {\n      uiFrameworkName &&\n        this.$patch((state) => (state.uiFramework = uiFrameworkName))\n      showFlashMessageWith(callback, this.$patch)\n\n      this.$subscribe(() => {\n        if (this.queue.length <= 0) return\n\n        showAllMessages(this)\n      })\n\n      showAllMessages(this)\n    },\n\n    /**\n     * add a message into flash message queue\n     */\n    add(flashMessage: FlashMessageArgument) {\n      this.queue.push(mergeWithDefaultMessage(flashMessage))\n    },\n\n    /**\n     * assign flash message array into queue directly.\n     */\n    set(flashMessages: FlashMessageArgument[]) {\n      this.queue = flashMessages.map((flashMessage) => {\n        return mergeWithDefaultMessage(flashMessage)\n      })\n    },\n\n    /**\n     * remove all messages\n     */\n    clear() {\n      this.queue = []\n    }\n  }\n})\n\nexport default useFlashMessageStore\n","type flashMessageArgument = { [key: string]: string }\ntype primevueToastMessage = {\n  /**\n   * Severity level of the message.\n   * Default value is 'info'.\n   */\n  severity?: any | undefined\n  /**\n   * Summary content of the message.\n   */\n  summary?: string | undefined\n  /**\n   * Detail content of the message.\n   */\n  detail?: any | undefined\n  /**\n   * Whether the message can be closed manually using the close icon.\n   * Default value is true.\n   */\n  closable?: boolean | undefined\n  /**\n   * Delay in milliseconds to close the message automatically.\n   * Default value is 3000.\n   */\n  life?: number | undefined\n  /**\n   * Key of the Toast to display the message.\n   */\n  group?: string | undefined\n  /**\n   * Style class of the message.\n   */\n  styleClass?: any\n  /**\n   * Style class of the content.\n   */\n  contentStyleClass?: any\n}\n\nconst convertRequiredKeys = ['type', 'message', 'position']\nconst messageTypeMap: flashMessageArgument = {\n  warning: 'warn',\n  danger: 'error'\n}\nconst positionMap: flashMessageArgument = {\n  top: 'top-center',\n  bottom: 'bottom-center'\n}\n\nconst convertSeverity = (messageType: string) => {\n  return messageTypeMap[messageType] || messageType\n}\nconst convertGroup = (position: string) => {\n  return positionMap[position] || position\n}\n\nexport const primevueAdapter = (\n  originalArguments: flashMessageArgument\n): primevueToastMessage => {\n  let args = { ...originalArguments }\n  const converted = {\n    severity: convertSeverity(args.type),\n    detail: args.message,\n    group: convertGroup(args.position)\n  }\n\n  // remove converted keys\n  Object.keys(args)\n    .filter((key) => !convertRequiredKeys.includes(key))\n    .forEach((key) => delete args[key])\n\n  return { ...converted, ...args }\n}\n"],"names":[],"version":3,"file":"module.js.map"}